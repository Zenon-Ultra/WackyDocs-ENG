<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¨ì–´ ì‹œí—˜ì§€ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 14px;
        }
        .control-panel {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        .input-group {
            margin-bottom: 25px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }
        .info-text {
            color: #666;
            font-size: 14px;
            margin-top: 8px;
        }
        .button-group {
            display: flex;
            gap: 15px;
        }
        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .generate-btn {
            background: #667eea;
            color: white;
        }
        .generate-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .download-btn {
            background: #51cf66;
            color: white;
        }
        .download-btn:hover {
            background: #40c057;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(81, 207, 102, 0.4);
        }
        .download-answer-btn {
            background: #ff6b6b;
            color: white;
        }
        .download-answer-btn:hover {
            background: #fa5252;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        button:disabled:hover {
            transform: none;
            box-shadow: none;
        }
        .preview {
            display: none;
            margin-top: 30px;
        }
        .preview.active {
            display: block;
        }
        .preview-header {
            background: #667eea;
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            text-align: center;
        }
        .preview-content {
            border: 2px solid #667eea;
            border-top: none;
            border-radius: 0 0 10px 10px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .preview-word {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .preview-word:last-child {
            border-bottom: none;
        }
        .word-num {
            width: 50px;
            font-weight: bold;
            color: #667eea;
        }
        .word-text {
            flex: 1;
            color: #333;
        }
        .icon {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ ì˜¬ë¦¼í¬ìŠ¤ ë‹¨ì–´ ì‹œí—˜ì§€ ìƒì„±ê¸°</h1>
        <p class="subtitle">ì›í•˜ëŠ” ë‹¨ì–´ ê°œìˆ˜ë¥¼ ì„ íƒí•˜ê³  ë¬´ì‘ìœ„ ì‹œí—˜ì§€ë¥¼ ë§Œë“œì„¸ìš”</p>
        
        <div class="control-panel">
            <div class="input-group">
                <label for="numWords">ë‹¨ì–´ ê°œìˆ˜ (ìµœëŒ€ 133ê°œ)</label>
                <input type="number" id="numWords" min="1" max="133" value="60">
                <p class="info-text">ì „ì²´ ë‹¨ì–´ ëª©ë¡ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì„ íƒë©ë‹ˆë‹¤</p>
            </div>
            
            <div class="button-group">
                <button class="generate-btn" onclick="generateTest()">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                    ì‹œí—˜ì§€ ìƒì„±
                </button>
            </div>
            
            <div class="button-group" style="margin-top: 15px;">
                <button class="download-btn" id="downloadTestBtn" onclick="downloadTest()" disabled>
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    ì‹œí—˜ì§€ ë‹¤ìš´ë¡œë“œ
                </button>
                <button class="download-answer-btn" id="downloadAnswerBtn" onclick="downloadAnswer()" disabled>
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    ë‹µì•ˆì§€ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
        
        <div class="preview" id="preview">
            <div class="preview-header">ë¯¸ë¦¬ë³´ê¸°</div>
            <div class="preview-content" id="previewContent"></div>
        </div>
    </div>

    <script>
        const vocabulary = [
            { word: "convention", meaning: "ê´€ìŠµ" },
            { word: "ethical", meaning: "ìœ¤ë¦¬ì ì¸" },
            { word: "applicable", meaning: "ì ìš©í•  ìˆ˜ ìˆëŠ”" },
            { word: "objective", meaning: "ê°ê´€ì ì¸" },
            { word: "universal", meaning: "ë³´í¸ì ì¸" },
            { word: "theorist", meaning: "ì´ë¡ ê°€" },
            { word: "rational", meaning: "í•©ë¦¬ì ì¸, ì´ì„±ì ì¸" },
            { word: "reason", meaning: "ì´ì„±" },
            { word: "legal", meaning: "ë²•ì ì¸, ë²•ë¥ ì˜" },
            { word: "binding", meaning: "êµ¬ì†í•˜ëŠ”, ë¬¶ì–´ ë‘ëŠ”" },
            { word: "regardless of", meaning: "~ì— ê´€ê³„ì—†ì´" },
            { word: "divine", meaning: "ì‹ ì„±í•œ" },
            { word: "account for", meaning: "~ì„ ì„¤ëª…í•˜ë‹¤" },
            { word: "uniformity", meaning: "íšì¼ì„±" },
            { word: "practice", meaning: "ê´€ë¡€, ì‹¤í–‰" },
            { word: "inherent", meaning: "ë‚´ì¬í•œ" },
            { word: "immutable", meaning: "ë¶ˆë³€í•˜ëŠ”" },
            { word: "academic", meaning: "í•™ìˆ ì ì¸, í•™ë¬¸ì ì¸" },
            { word: "construct", meaning: "êµ¬ì„±í•˜ë‹¤" },
            { word: "unsettled", meaning: "ë¶ˆì•ˆí•œ" },
            { word: "stressed", meaning: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ”" },
            { word: "avoid", meaning: "í”¼í•˜ë‹¤" },
            { word: "carry on with", meaning: "~ì„ ê³„ì†í•˜ë‹¤" },
            { word: "unusual", meaning: "ì˜ˆì™¸ì ì¸, í”ì¹˜ ì•Šì€" },
            { word: "solution", meaning: "í•´ê²°ì±…" },
            { word: "absence", meaning: "ë¶€ì¬" },
            { word: "actual", meaning: "ì‹¤ì œì˜" },
            { word: "behaviour", meaning: "í–‰ë™" },
            { word: "realise", meaning: "ê¹¨ë‹«ë‹¤, ì¸ì‹í•˜ë‹¤" },
            { word: "worry", meaning: "ê±±ì •" },
            { word: "give in", meaning: "êµ´ë³µí•˜ë‹¤" },
            { word: "vicious circle", meaning: "ì•…ìˆœí™˜" },
            { word: "withdrawal", meaning: "ê¸ˆë‹¨ í˜„ìƒ" },
            { word: "absorb", meaning: "í¡ìˆ˜í•˜ë‹¤, ë¹¨ì•„ë“¤ì´ë‹¤" },
            { word: "moral code", meaning: "ë„ë• ê·œë²”" },
            { word: "transmit", meaning: "ì „ë‹¹í•˜ë‹¤" },
            { word: "cue", meaning: "ë‹¨ì„œ, ì‹ í˜¸" },
            { word: "cooperation", meaning: "í˜‘ë ¥" },
            { word: "trustworthy", meaning: "ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”" },
            { word: "self-interest", meaning: "ì´ê¸°ì‹¬" },
            { word: "in favor of", meaning: "~ì„ ìœ„í•´" },
            { word: "take advantage of", meaning: "~ì„ ì´ìš©í•˜ë‹¤" },
            { word: "psychological", meaning: "ì‹¬ë¦¬ì ì¸" },
            { word: "mechanism", meaning: "ë©”ì»¤ë‹ˆì¦˜, êµ¬ì¡°, ê¸°êµ¬" },
            { word: "innate", meaning: "íƒ€ê³ ë‚œ, ì„ ì²œì ì¸" },
            { word: "defection", meaning: "íƒœë§Œ" },
            { word: "suppress", meaning: "ì–µì œí•˜ë‹¤" },
            { word: "pre-predatory", meaning: "ëª…ì‚¬" },
            { word: "primate", meaning: "ì˜ì¥ë¥˜" },
            { word: "prey", meaning: "ì‚¬ëƒ¥ê°, ë¨¹ì´" },
            { word: "predator", meaning: "í¬ì‹ì" },
            { word: "upright", meaning: "ì í•©í•œ, ë˜‘ë°”ë¥¸" },
            { word: "testify", meaning: "ì¦ëª…í•˜ë‹¤" },
            { word: "initially", meaning: "ì²˜ìŒì—" },
            { word: "encounter", meaning: "ë§ˆì£¼ì¹˜ë‹¤, ë§Œë‚˜ë‹¤" },
            { word: "associate ~ with ...", meaning: "~ì„ ...ê³¼ ì—°ê´€ ì§“ë‹¤" },
            { word: "scores of", meaning: "ë§ì€" },
            { word: "tameness", meaning: "ì˜¨ìˆœí•¨, ê¸¸ë“¤ì„" },
            { word: "a term of art", meaning: "ì „ë¬¸ ìš©ì–´" },
            { word: "carnivory", meaning: "ìœ¡ì‹" },
            { word: "template", meaning: "í‹€, ëª¨í˜•" },
            { word: "linguistic", meaning: "ì–¸ì–´ì˜" },
            { word: "election", meaning: "ì„ ê±°" },
            { word: "literally", meaning: "ë¬¸ì ê·¸ëŒ€ë¡œ" },
            { word: "make sense", meaning: "ì´ì¹˜ì— ë§ë‹¤" },
            { word: "physically", meaning: "ë¬¼ë¦¬ì ìœ¼ë¡œ" },
            { word: "measurable", meaning: "ì¸¡ì • ê°€ëŠ¥í•œ" },
            { word: "observable", meaning: "ê´€ì°° ê°€ëŠ¥í•œ" },
            { word: "metaphorical", meaning: "ì€ìœ ì ì¸" },
            { word: "depressed", meaning: "ìš°ìš¸í•œ" },
            { word: "figure of speech", meaning: "ìˆ˜ì‚¬ì  í‘œí˜„" },
            { word: "exceptional", meaning: "íŠ¹ë³„í•œ" },
            { word: "unconsciously", meaning: "ë¬´ì˜ì‹ì ìœ¼ë¡œ" },
            { word: "permeate", meaning: "ìŠ¤ë©°ë“¤ë‹¤" },
            { word: "conceptual", meaning: "ê°œë…ì ì¸" },
            { word: "route", meaning: "ê²½ë¡œ, ê¸¸, ë…¸ì„ " },
            { word: "entirely", meaning: "ì™„ì „íˆ, ì•„ì£¼" },
            { word: "scale", meaning: "ì¶•ì²™ëŒ€ë¡œ ì„¤ê³„í•˜ë‹¤" },
            { word: "spatial", meaning: "ê³µê°„ì ì¸" },
            { word: "highlight", meaning: "ê°•ì¡°í•˜ë‹¤" },
            { word: "informal", meaning: "ë¹„ê³µì‹ì ì¸" },
            { word: "reference", meaning: "ì°¸ì¡°, ì°¸ê³ í•˜ë‹¤" },
            { word: "visible", meaning: "ëˆˆì— ë„ëŠ”, ë‘ë“œëŸ¬ì§„" },
            { word: "feature", meaning: "íŠ¹ì§•, íŠ¹ìƒ‰" },
            { word: "dealership", meaning: "íŒë§¤ ëŒ€ë¦¬ì " },
            { word: "adaptive", meaning: "ì ìš©í•˜ëŠ”" },
            { word: "biologically", meaning: "ìƒë¬¼í•™ì ìœ¼ë¡œ" },
            { word: "novel", meaning: "ìƒˆë¡œìš´" },
            { word: "measure", meaning: "ì¸¡ì •í•˜ë‹¤" },
            { word: "response", meaning: "ë°˜ì‘" },
            { word: "diminish", meaning: "ê°ì†Œí•˜ë‹¤" },
            { word: "tiny", meaning: "ì•„ì£¼ ì‘ì€" },
            { word: "colleague", meaning: "ë™ë£Œ" },
            { word: "supposedly", meaning: "ê²‰ìœ¼ë¡œ ë³´ê¸°ì—, ì§ì‘ê±´ëŒ€" },
            { word: "grade", meaning: "ì±„ì í•˜ë‹¤" },
            { word: "performance", meaning: "ì„±ê³¼, ì‹¤ì " },
            { word: "vividly", meaning: "ìƒìƒí•˜ê²Œ" },
            { word: "in comparison to", meaning: "~ê³¼ ë¹„êµí•˜ì—¬" },
            { word: "swim with", meaning: "~ì´ ê°€ë“í•˜ë‹¤" },
            { word: "stick with", meaning: "~ì„ ê³„ì†í•˜ë‹¤" },
            { word: "finding", meaning: "ì—°êµ¬ ê²°ê³¼" },
            { word: "elevate", meaning: "ë†’ì´ë‹¤" },
            { word: "persistence", meaning: "ëˆê¸°, ì§€ì†ì„±" },
            { word: "anagram", meaning: "ì² ì ìˆœì„œë¥¼ ë°”ê¾¸ì–´ ë§Œë“  ë§" },
            { word: "poke", meaning: "ì¿¡ ì°Œë¥´ê¸°, ì‘¤ì‹œë‹¤" },
            { word: "literacy", meaning: "ë¬¸í•´ë ¥" },
            { word: "crucial", meaning: "ì¤‘ìš”í•œ" },
            { word: "adolescent", meaning: "ì²­ì†Œë…„" },
            { word: "narrative", meaning: "ì´ì•¼ê¸°" },
            { word: "conceive", meaning: "ìƒê°í•˜ë‹¤" },
            { word: "integrate", meaning: "í†µí•©í•˜ë‹¤" },
            { word: "consequently", meaning: "ê·¸ ê²°ê³¼" },
            { word: "emphasis", meaning: "ê°•ì¡°" },
            { word: "call on", meaning: "ìš”êµ¬í•˜ë‹¤" },
            { word: "middle grade", meaning: "ì¤‘í•™ë…„(ëŒ€ëµ 10~14ì„¸ì˜ í•™ìƒ)" },
            { word: "expository", meaning: "ì„¤ëª…ì ì¸" },
            { word: "aspire to do", meaning: "~í•˜ê¸°ë¥¼ ì—´ë§í•˜ë‹¤" },
            { word: "have ~ in mind", meaning: "~ì„ ì—¼ë‘ì— ë‘ë‹¤" },
            { word: "gifted", meaning: "ì¬ëŠ¥ ìˆëŠ”" },
            { word: "evolution", meaning: "ì§„í™”" },
            { word: "appetite", meaning: "ìš•êµ¬, ì‹ìš•" },
            { word: "species", meaning: "ì¢…" },
            { word: "navigate", meaning: "ê¸¸ì„ ì°¾ì•„ ë‚˜ê°€ë‹¤" },
            { word: "shelter", meaning: "ì€ì‹ ì²˜" },
            { word: "whereabout", meaning: "ì†Œì¬, í–‰ë°©" },
            { word: "edge", meaning: "ê°•ì " },
            { word: "asset", meaning: "ìì‚°" },
            { word: "run out of", meaning: "~ì´ ì—†ì–´ì§€ë‹¤" },
            { word: "intriguing", meaning: "ì•„ì£¼ í¥ë¯¸ë¡œìš´" },
            { word: "anthropology", meaning: "ì¸ë¥˜í•™" }
        ];

        let currentTest = null;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function generateTest() {
            const numWords = parseInt(document.getElementById('numWords').value);
            
            if (numWords < 1 || numWords > vocabulary.length) {
                alert(`1~${vocabulary.length} ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
                return;
            }

            const shuffled = shuffleArray(vocabulary);
            currentTest = shuffled.slice(0, numWords);

            // ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            const previewContent = document.getElementById('previewContent');
            previewContent.innerHTML = currentTest.map((item, index) => `
                <div class="preview-word">
                    <span class="word-num">${index + 1}.</span>
                    <span class="word-text">${item.word}</span>
                </div>
            `).join('');

            document.getElementById('preview').classList.add('active');
            document.getElementById('downloadTestBtn').disabled = false;
            document.getElementById('downloadAnswerBtn').disabled = false;
        }

        function generatePDF(includeAnswers) {
            const numPerColumn = 30;
            const col1 = currentTest.slice(0, numPerColumn);
            const col2 = currentTest.slice(numPerColumn);

            const rows = [];
            for (let i = 0; i < numPerColumn; i++) {
                const left = col1[i] || { word: '', meaning: '' };
                const right = col2[i] || { word: '', meaning: '' };
                
                rows.push(`
                    <tr>
                        <td class="no-col">${i + 1}</td>
                        <td class="word-col">${left.word}</td>
                        <td class="word-col">${includeAnswers ? left.meaning : ''}</td>
                        <td class="no-col">${col2[i] ? i + 1 + numPerColumn : ''}</td>
                        <td class="word-col">${right.word}</td>
                        <td class="word-col">${includeAnswers ? right.meaning : ''}</td>
                    </tr>
                `);
            }

            const title = includeAnswers ? 'VOCA TEST - ë‹µì•ˆì§€' : 'VOCA TEST';
            const date = new Date().toLocaleDateString('ko-KR');

            return `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <style>
        @page {
            size: A4;
            margin: 20mm;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 20px;
            background: white;
        }
        .container {
            max-width: 210mm;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px solid #333;
            padding-bottom: 15px;
        }
        h1 {
            font-size: 28px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            background-color: #f0f0f0;
        }
        td {
            border: 1px solid black;
            padding: 8px;
            height: 25px;
        }
        .no-col {
            width: 6%;
            text-align: center;
            font-weight: bold;
        }
        .word-col {
            width: 22%;
        }
        .meaning-col {
            width: 22%;
        }
        @media print {
            body {
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>${title}</h1>
            <div class="info">
                <span>ì´ ë‹¨ì–´ ìˆ˜: ${currentTest.length}ê°œ</span>
                <span>ìƒì„±ì¼: ${date}</span>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>ë‹¨ì–´</th>
                    <th>ëœ»</th>
                    <th>No.</th>
                    <th>ë‹¨ì–´</th>
                    <th>ëœ»</th>
                </tr>
            </thead>
            <tbody>
                ${rows.join('')}
            </tbody>
        </table>
    </div>
</body>
</html>`;
        }

        function downloadTest() {
            const html = generatePDF(false);
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ë‹¨ì–´ì‹œí—˜ì§€_${currentTest.length}ê°œ_${new Date().getTime()}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('ì‹œí—˜ì§€ HTML íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\níŒŒì¼ì„ ì—´ì–´ì„œ Ctrl+P(ë˜ëŠ” Cmd+P)ë¡œ PDFë¡œ ì €ì¥í•˜ì„¸ìš”.');
        }

        function downloadAnswer() {
            const html = generatePDF(true);
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ë‹¨ì–´ë‹µì•ˆì§€_${currentTest.length}ê°œ_${new Date().getTime()}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('ë‹µì•ˆì§€ HTML íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\níŒŒì¼ì„ ì—´ì–´ì„œ Ctrl+P(ë˜ëŠ” Cmd+P)ë¡œ PDFë¡œ ì €ì¥í•˜ì„¸ìš”.');
        }
    </script>
</body>
</html>