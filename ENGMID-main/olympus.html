<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¬ë¦¼í¬ìŠ¤ ì˜ì–´ë…í•´ì˜ ê¸°ë³¸ - ë¬¸ì¥ ìˆœì„œ ë°°ì—´ ì—°ìŠµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #6f42c1, #e83e8c);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }

        .back-btn {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .exercise-container {
            padding: 30px 20px;
        }

        .exercise-info {
            background: #f8f9fa;
            border-left: 5px solid #6f42c1;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .exercise-select {
            margin-bottom: 30px;
            text-align: center;
        }

        .exercise-select select {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            min-width: 300px;
            max-width: 100%;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(45deg, #6f42c1, #e83e8c);
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(111, 66, 193, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(111, 66, 193, 0.4);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .exercise-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .back-btn {
                left: 15px;
                padding: 8px 15px;
                font-size: 14px;
            }

            .header {
                padding: 25px 15px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .exercise-container {
                padding: 20px 15px;
            }

            .exercise-select select {
                min-width: 250px;
                font-size: 14px;
                padding: 10px 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 14px;
                margin: 5px;
            }

            .sentence-item {
                padding: 12px;
                font-size: 14px;
            }

            .drop-zone {
                padding: 15px;
                min-height: 60px;
                font-size: 14px;
            }

            .exercise-area {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .back-btn {
                left: 10px;
                padding: 6px 12px;
                font-size: 12px;
            }

            .header {
                padding: 20px 10px;
            }

            .header h1 {
                font-size: 1.6em;
            }

            .exercise-container {
                padding: 15px 10px;
            }

            .exercise-select select {
                min-width: 200px;
                font-size: 13px;
            }

            .btn {
                padding: 8px 15px;
                font-size: 13px;
            }

            .sentence-item {
                padding: 10px;
                font-size: 13px;
            }
        }

        .scrambled-sentences, .ordered-sentences {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
        }

        .scrambled-sentences h3, .ordered-sentences h3 {
            color: #6f42c1;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #6f42c1;
            padding-bottom: 5px;
        }

        .sentence-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            position: relative;
            line-height: 1.5;
            font-family: 'Times New Roman', serif;
        }

        .sentence-item:hover {
            border-color: #6f42c1;
            box-shadow: 0 4px 12px rgba(111, 66, 193, 0.2);
            transform: translateY(-2px);
        }

        .sentence-item:active {
            transform: scale(0.98);
        }

        .sentence-item.selected {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.3);
        }

        .drop-zone {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 5px 0;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.3s ease;
            font-style: italic;
            cursor: pointer;
        }

        .drop-zone:hover {
            border-color: #6f42c1;
            background-color: rgba(111, 66, 193, 0.1);
            color: #6f42c1;
        }

        .drop-zone.highlight {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
            color: #007bff;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 123, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
        }

        .score-display {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .feedback {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feedback.correct {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            opacity: 1;
        }

        .feedback.incorrect {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            color: white;
            opacity: 1;
        }

        .correct-sentence {
            border-color: #28a745 !important;
            background-color: rgba(40, 167, 69, 0.1);
        }

        .incorrect-sentence {
            border-color: #dc3545 !important;
            background-color: rgba(220, 53, 69, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="main.html" class="back-btn">â† ê³¼ ì„ íƒ</a>
            <h1>ğŸ“š ì˜¬ë¦¼í¬ìŠ¤ ì˜ì–´ë…í•´ì˜ ê¸°ë³¸</h1>
            <p>Ch.03 & Ch.04 Units - ì˜ì–´ ë¬¸ì¥ë“¤ì„ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë°°ì—´í•´ë³´ì„¸ìš”!</p>
        </div>

        <div class="exercise-container">
            <div class="exercise-info">
                <h3>ğŸ“š ì—°ìŠµ ë°©ë²•</h3>
                <p>1. ì•„ë˜ì—ì„œ ì—°ìŠµí•  ì§€ë¬¸ì„ ì„ íƒí•˜ì„¸ìš”<br>
                2. ì™¼ìª½ì˜ ë¬¸ì¥ì„ í´ë¦­í•´ì„œ ì„ íƒí•œ í›„, ì˜¤ë¥¸ìª½ì˜ ì›í•˜ëŠ” ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”<br>
                3. ì˜ëª» ë°°ì¹˜í•œ ë¬¸ì¥ì€ í´ë¦­í•´ì„œ ë‹¤ì‹œ ì™¼ìª½ìœ¼ë¡œ ëŒë ¤ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br>
                4. 'ì •ë‹µ í™•ì¸' ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
            </div>

            <div class="exercise-select">
                <select id="exerciseSelect">
                    <option value="">ì—°ìŠµí•  ì§€ë¬¸ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ch03_unit09_1">Ch.03 Unit 09-1: ìì—°ë²• ì´ë¡  - 6ë¬¸ì¥</option>
                    <option value="ch03_unit09_2">Ch.03 Unit 09-2: í•™ìˆ ì  ê¸€ì“°ê¸°ì˜ íŠ¹ì§• - 6ë¬¸ì¥</option>
                    <option value="ch03_unit09_3">Ch.03 Unit 09-3: ìŠµê´€ì˜ ë³¸ì§ˆ - 7ë¬¸ì¥</option>
                    <option value="ch04_unit10_1">Ch.04 Unit 10-1: ì§‘ë‹¨ê³¼ ê°œì¸ì˜ ì´í•´ê´€ê³„ - 5ë¬¸ì¥</option>
                    <option value="ch04_unit10_2">Ch.04 Unit 10-2: ì´ˆê¸° ì¸ë¥˜ì™€ ë™ë¬¼ì˜ ê´€ê³„ - 8ë¬¸ì¥</option>
                    <option value="ch04_unit10_3">Ch.04 Unit 10-3: ì¼ìƒ ì–¸ì–´ì˜ ì€ìœ ì  íŠ¹ì„± - 7ë¬¸ì¥</option>
                    <option value="ch04_unit11_1">Ch.04 Unit 11-1: ì •ì‹ ì  ì§€ë„ ê·¸ë¦¬ê¸° - 8ë¬¸ì¥</option>
                    <option value="ch04_unit11_2">Ch.04 Unit 11-2: ì¹œìˆ™í•¨ê³¼ ë‡Œì˜ ë°˜ì‘ - 8ë¬¸ì¥</option>
                    <option value="ch04_unit11_3">Ch.04 Unit 11-3: ìì•„ì˜ ê°œë… - 7ë¬¸ì¥</option>
                    <option value="ch04_unit12_1">Ch.04 Unit 12-1: ëª°ì…(í”Œë¡œìš°)ì˜ ì‹¬ë¦¬í•™ - 7ë¬¸ì¥</option>
                    <option value="ch04_unit12_2">Ch.04 Unit 12-2: ë¶€ì •ì„± í¸í–¥ - 7ë¬¸ì¥</option>
                    <option value="ch04_unit12_3">Ch.04 Unit 12-3: ê°ì„± ì§€ëŠ¥ - 7ë¬¸ì¥</option>
                </select>
            </div>

            <div class="controls">
                <button class="btn" id="shuffleBtn" disabled>ë‹¤ì‹œ ì„ê¸°</button>
                <button class="btn" id="checkBtn" disabled>ì •ë‹µ í™•ì¸</button>
                <button class="btn" id="resetBtn" disabled>ì´ˆê¸°í™”</button>
            </div>

            <div class="score-display" id="scoreDisplay" style="display: none;">
                ì ìˆ˜: <span id="score">0</span>/100
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="exercise-area" id="exerciseArea" style="display: none;">
                <div class="scrambled-sentences">
                    <h3>ğŸ”€ Scrambled Sentences</h3>
                    <div id="scrambledContainer"></div>
                </div>

                <div class="ordered-sentences">
                    <h3>âœ… Correct Order</h3>
                    <div id="orderedContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const exercises = {
            ch03_unit09_1: [
                "According to natural law theory, moral principles are not simply the result of human convention or social agreement, but are based on fundamental principles of nature, including human nature.",
                "The term \"natural law\" refers to a set of ethical and moral principles that are thought to be inherent in the natural world and applicable to all human beings.",
                "These principles are considered to be objective, universal, and immutable, and are often seen as a source of guidance for human behaviour.",
                "Natural law theorists believe that the natural world operates according to a set of rational principles, and that these principles can be discovered through human reason and observation.",
                "They argue that these principles provide a foundation for moral and legal systems, and that they are binding on all individuals, regardless of their cultural or social background.",
                "Critics of natural law theory argue that it relies too heavily on unprovable assumptions about the existence of a divine purpose, and that it fails to account for the diversity of moral beliefs and practices across cultures and historical periods."
            ],
            ch03_unit09_2: [
                "Most academic writing involves constructing an argument or supporting a position about some question or topic.",
                "This requires clear organization with all your points directly connected to your argument or position.",
                "In Western academic writing, a 'linear' style is preferred, where one point leads directly and unambiguously to the next, with little room for digressions.",
                "The organization will depend on the purpose of the composition; a literary critique will have a different structure from a chemistry report.",
                "Part of learning a discipline is learning the writing organization appropriately to that discipline.",
                "For example, academic papers in my discipline (Applied Linguistics) usually have sections (e.g., Introduction, Literature review, Discussion, Conclusion), which are typically signposted with headings that make the organization of the paper explicit."
            ],
            ch03_unit09_3: [
                "Habits are part of our everyday lives and therefore, when we don't clean our teeth, eat breakfast, have our morning coffee or have biscuits in the afternoon, we feel unsettled and a little bit stressed.",
                "This feeling is unpleasant and we quickly learn that it can be avoided by carrying on with our habit.",
                "Therefore, not eating biscuits feels unusual, but this can all be made OK with a few biscuits.",
                "And the habit carries on as it becomes the solution to the problem created when trying to change it.",
                "It's a vicious circle.",
                "But it's the change in the habit which makes us feel stressed, not the absence of the actual behaviour.",
                "And if we start to realise that the feeling of stress or worry is just 'withdrawal' and will only be made worse in the longer term if we give in and use the habit to get rid of it, then we can start to break the habit itself."
            ],
            ch04_unit10_1: [
                "We not only absorb our moral codes and definitions of right and wrong from the group; the group also transmits cues about cooperation and defection and what it means to act in a trustworthy manner.",
                "People are more likely to suppress their self-interest in favor of the group interest if they feel that others are doing so as well, and they're less likely to do so if they feel that others are taking advantage of them.",
                "The psychological mechanism for this is unclear, but certainly it is related to our innate sense of fairness.",
                "We generally don't mind sacrificing for the group, as long as we're all sacrificing equally.",
                "But if we feel like we're being taken advantage of by others who are defecting, we're more likely to defect as well."
            ],
            ch04_unit10_2: [
                "In their pre-predatory stage, our primate ancestors had moved through the world among other creatures that did not fear them.",
                "Once they adopted carnivory, the prey they were interested in learned to allow close approaches at their own risk.",
                "But unlike big cats or terrifying wolves that were obvious predators, upright primates didn't automatically fit the predator template for most animals.",
                "Numerous examples from around the world during the past five centuries testify that upon initially encountering humans, many wild creatures did not associate us with a threat.",
                "In their first encounters with humans, scores of species reacted with trust and tameness.",
                "There is a term of art for this: biological first contact.",
                "When we appeared in new geographies for the first time, wild animals had to learn to be afraid of us.",
                "Many died standing and looking, never absorbing the lesson."
            ],
            ch04_unit10_3: [
                "Consider the following two everyday linguistic expressions: \"The election is ahead of us\" and \"the long Winter is now behind us.\"",
                "Literally, these expressions do not make any sense.",
                "\"An election\" is not something that can physically be \"ahead\" of us in any measurable or observable way, and the \"Winter\" is not something that can be physically \"behind\" us.",
                "Hundreds of thousands of these expressions, whose meaning is not literal but metaphorical, can be observed in human everyday language: \"he is a cold person,\" \"she has strong opinions,\" \"the market is quite depressed.\"",
                "Metaphor, in this sense, is not just a figure of speech, or an exceptional communicational tool in the hands of poets and artists.",
                "It is an ordinary mechanism of thought.",
                "Usually operating unconsciously and effortlessly, it permeates nearly every aspect of human everyday (and technical) language, making imagination possible."
            ],
            ch05_unit15_1: [
                "When we read about psychology, how do we assess the quality of what we read?",
                "First, we cannot judge the quality of an argument on the basis of what it concludes about people, or on the basis of whether we agree with the author's beliefs about people or not.",
                "It is quite possible for two excellent psychologists to differ strongly about an aspect of human behaviour, while both providing convincing arguments and good evidence for reaching their conclusions.",
                "As you read more widely in psychology, you will find that there are many differences in opinion among researchers.",
                "It can even be the case that two researchers conduct what looks like the same experiment in two different settings, but get very different results.",
                "This does not mean, necessarily, that either of the researchers did bad work.",
                "On the contrary, different findings from different contexts may give us important information."
            ],
            ch05_unit15_2: [
                "'I'll believe it when I see it.' This familiar remark recalls how first-hand personal experience is commonly accepted as a convincing way if not the fundamental way to determine what to believe in.",
                "Many centuries ago, for instance, it was unbelievable that there could be organisms so small as to be invisible to the naked eye.",
                "Opinions changed after microscopes allowed us to see these tiny creatures in the late 1600s.",
                "This emphasis upon direct personal experience is philosophically expandable to the point of prescribing how words must derive their meaning.",
                "The prescription would be: if any given word is to be meaningful, then it must be traceable back to some sensory experience.",
                "Otherwise, the word should be regarded as only a meaningless sound.",
                "This experience-tied theory of meaning was advocated by the Scottish philosopher David Hume, an empiricist who believed that knowledge of what exists or is true can only come from observing the world."
            ],
            ch05_unit15_3: [
                "Anger is clearly related to aggression but they are not one and the same.",
                "It is possible to be aggressive without being angry, and it is equally possible to be angry without becoming aggressive.",
                "However, the two (the emotion of anger and the behaviour of aggression) are linked and are biologically based, with obvious survival value.",
                "Anger always results in a much increased burst of energy and, although biologically based, is seen by some psychologists as largely socially constructed.",
                "That is, some people might be temperamentally more prone to anger than others, but the extent to which they express this is probably socially determined.",
                "In our culture, for example, boys are encouraged to express their anger more openly than girls and a far greater proportion of men than women are made to take anger management courses.",
                "These are learned differences. not differences of biology."
            ],
            ch05_unit16_1: [
                "From a psychological point of view, bad is stronger than good.",
                "It takes four positive interactions to balance out a single negative one.",
                "Bad memories resonate much more powerfully than good ones.",
                "A bad experience from ten years ago might appear in your mind's eye in sharp focus with strong, clear emotions attached to it.",
                "A happy memory from the same time period may have fuzzier edges and just an overall sense of pleasantness.",
                "This is known as negativity bias or the negativity effect.",
                "The human brain is organized to survive by avoiding negative experiences and emotions.",
                "Our brains and emotional systems developed under evolutionary pressures to better keep us alive by remembering dangerous situations very clearly so we could avoid them in the future.",
                "In modern times, we are unlikely to die from getting split off from our tribe and becoming prey to a wild beast, but our brains still look for negativity in every situation."
            ],
            ch05_unit16_2: [
                "In a classic study from 1975, Ellen Langer and Jane Roth trained 90 Stanford undergraduate students to play a coin-flip game.",
                "Students who guessed correctly early were much more likely to decide that they were correctly predicting the outcomes than students who guessed incorrectly early.",
                "That is, a sequence of wins followed by losses led the students to imagine they understood the task and needed to try to figure out what was going wrong, while a series of losses intermixed with wins led the students to think it was random.",
                "A sequence of four correct early guesses was enough to lead people to believe they could correctly guess the sequence \"even for sophisticated subjects.\"",
                "This is how the casinos hook people; a quick series of wins leads you to think that you can beat the game, even though WWWWWLLLLL (where W means win and L means lose) is just as random as WLWLLLWWLW."
            ],
            ch05_unit16_3: [
                "Heritability is frequently misunderstood.",
                "For example, it is not a constant like the speed of light or gravity.",
                "It is a statistic that describes a particular population at a particular time with that population's particular mix of genetic and environmental influences.",
                "A simpler way of expressing this is that it describes what is but does not predict what could be.",
                "Another population, or the same population at a different time, could have a different mix of genetic and environmental influences.",
                "Heritability will reflect these differences.",
                "For example, heritability of body weight is greater in wealthier countries such as the US than in poorer countries such as Albania and Nicaragua.",
                "Wealthier countries have greater access to fast-food outlets and high-energy snacks, and greater access to fattening food leads to higher heritability because it exposes genetic differences in people's propensities to put on the pounds."
            ]
        };

        let currentExercise = [];
        let correctOrder = [];
        let userOrder = [];
        let selectedSentence = null;

        const exerciseSelect = document.getElementById('exerciseSelect');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const checkBtn = document.getElementById('checkBtn');
        const resetBtn = document.getElementById('resetBtn');
        const exerciseArea = document.getElementById('exerciseArea');
        const scrambledContainer = document.getElementById('scrambledContainer');
        const orderedContainer = document.getElementById('orderedContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreElement = document.getElementById('score');
        const feedback = document.getElementById('feedback');

        exerciseSelect.addEventListener('change', function() {
            const selectedExercise = this.value;
            if (selectedExercise) {
                loadExercise(selectedExercise);
            }
        });

        shuffleBtn.addEventListener('click', shuffleSentences);
        checkBtn.addEventListener('click', checkAnswer);
        resetBtn.addEventListener('click', resetExercise);

        function loadExercise(exerciseKey) {
            currentExercise = [...exercises[exerciseKey]];
            correctOrder = [...currentExercise];
            userOrder = [];
            selectedSentence = null;

            shuffleSentences();
            exerciseArea.style.display = 'block';
            shuffleBtn.disabled = false;
            resetBtn.disabled = false;
            scoreDisplay.style.display = 'none';
            hideFeedback();
        }

        function shuffleSentences() {
            const shuffled = [...currentExercise];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }

            displayScrambledSentences(shuffled);
            createDropZones();
            checkBtn.disabled = true;
            userOrder = [];
            selectedSentence = null;
        }

        function displayScrambledSentences(sentences) {
            scrambledContainer.innerHTML = '';
            sentences.forEach((sentence, index) => {
                const sentenceDiv = document.createElement('div');
                sentenceDiv.className = 'sentence-item';
                sentenceDiv.textContent = sentence;
                sentenceDiv.dataset.sentence = sentence;

                sentenceDiv.addEventListener('click', function() {
                    selectSentence(this);
                });

                scrambledContainer.appendChild(sentenceDiv);
            });
        }

        function selectSentence(element) {
            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            element.classList.add('selected');
            selectedSentence = element;

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.add('highlight');
            });

            showFeedback('ì„ íƒëœ ë¬¸ì¥ì„ ë°°ì¹˜í•  ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”!', 'correct');
        }

        function createDropZones() {
            orderedContainer.innerHTML = '';
            for (let i = 0; i < currentExercise.length; i++) {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.textContent = `ë¬¸ì¥ ${i + 1}ì„ ì—¬ê¸°ì— ë°°ì¹˜í•˜ì„¸ìš”`;
                dropZone.dataset.position = i;

                dropZone.addEventListener('click', function() {
                    handleDropZoneClick(this);
                });

                orderedContainer.appendChild(dropZone);
            }
        }

        function handleDropZoneClick(dropZone) {
            if (!selectedSentence) {
                showFeedback('ë¨¼ì € ì™¼ìª½ì—ì„œ ë¬¸ì¥ì„ ì„ íƒí•˜ì„¸ìš”!', 'incorrect');
                return;
            }

            const sentence = selectedSentence.dataset.sentence;
            const position = parseInt(dropZone.dataset.position);

            const sentenceDiv = document.createElement('div');
            sentenceDiv.className = 'sentence-item';
            sentenceDiv.textContent = sentence;
            sentenceDiv.dataset.sentence = sentence;
            sentenceDiv.dataset.position = position;

            sentenceDiv.addEventListener('click', function() {
                returnSentence(this);
            });

            dropZone.parentNode.replaceChild(sentenceDiv, dropZone);
            selectedSentence.remove();
            selectedSentence = null;

            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            updateUserOrder();
            hideFeedback();
        }

        function returnSentence(sentenceElement) {
            const position = parseInt(sentenceElement.dataset.position);
            const sentence = sentenceElement.dataset.sentence;

            const dropZone = document.createElement('div');
            dropZone.className = 'drop-zone';
            dropZone.textContent = `ë¬¸ì¥ ${position + 1}ì„ ì—¬ê¸°ì— ë°°ì¹˜í•˜ì„¸ìš”`;
            dropZone.dataset.position = position;

            dropZone.addEventListener('click', function() {
                handleDropZoneClick(this);
            });

            sentenceElement.parentNode.replaceChild(dropZone, sentenceElement);

            const newSentenceDiv = document.createElement('div');
            newSentenceDiv.className = 'sentence-item';
            newSentenceDiv.textContent = sentence;
            newSentenceDiv.dataset.sentence = sentence;

            newSentenceDiv.addEventListener('click', function() {
                selectSentence(this);
            });

            scrambledContainer.appendChild(newSentenceDiv);

            selectedSentence = null;
            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            updateUserOrder();
        }

        function updateUserOrder() {
            userOrder = [];
            const placedSentences = orderedContainer.querySelectorAll('.sentence-item');
            placedSentences.forEach(sentence => {
                const position = parseInt(sentence.dataset.position);
                userOrder[position] = sentence.dataset.sentence;
            });

            const hasEmptySlots = userOrder.includes(undefined) || userOrder.length !== currentExercise.length;
            checkBtn.disabled = hasEmptySlots;
        }

        function checkAnswer() {
            let correct = 0;
            const placedSentences = orderedContainer.querySelectorAll('.sentence-item');
            
            placedSentences.forEach((sentence, index) => {
                sentence.classList.remove('correct-sentence', 'incorrect-sentence');
                const position = parseInt(sentence.dataset.position);
                const userSentence = sentence.dataset.sentence;
                const correctSentence = correctOrder[position];
                
                if (userSentence === correctSentence) {
                    sentence.classList.add('correct-sentence');
                    correct++;
                } else {
                    sentence.classList.add('incorrect-sentence');
                }
            });

            const score = Math.round((correct / currentExercise.length) * 100);
            scoreElement.textContent = score;
            scoreDisplay.style.display = 'block';

            if (score === 100) {
                showFeedback('ğŸ‰ ì™„ë²½í•©ë‹ˆë‹¤! ëª¨ë“  ë¬¸ì¥ì„ ì˜¬ë°”ë¥´ê²Œ ë°°ì—´í–ˆìŠµë‹ˆë‹¤!', 'correct');
            } else if (score >= 70) {
                showFeedback(`ğŸ‘ ì˜í–ˆìŠµë‹ˆë‹¤! ${correct}/${currentExercise.length}ê°œ ì •ë‹µì…ë‹ˆë‹¤.`, 'correct');
            } else {
                showFeedback(`ğŸ’ª ë‹¤ì‹œ í•œë²ˆ ì‹œë„í•´ë³´ì„¸ìš”! ${correct}/${currentExercise.length}ê°œ ì •ë‹µì…ë‹ˆë‹¤.`, 'incorrect');
            }
        }

        function resetExercise() {
            const selectedExercise = exerciseSelect.value;
            if (selectedExercise) {
                loadExercise(selectedExercise);
            }
            hideFeedback();
        }

        function showFeedback(message, type) {
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
        }

        function hideFeedback() {
            feedback.className = 'feedback';
        }
    </script>
</body>
</html>
